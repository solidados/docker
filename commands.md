# Docker commands
### Команда `docker run`
Запуск образа по имени (если локально такого образа нет, то Docker начнёт искать его удалённо)
```shell
$ docker run <"image name">
```

### Команда `docker run -it`
Запуск с флагом `-it` (Interactive Terminal) – нужен для того, чтобы установить связь с образом и поддерживать его работу
```shell
$ docker run -it <"image name">
```
После запуска такой команды, в терминале появится `#` что означает, что вы находитесь в оболочке вызванного контейнера (Linux shell внутри контейнера). При этом `Status` контейнера поменяется с `Exited` на `Running`

---

## Работа с образами
### Команда `build`
После того, как все инструкции были описаны в файле `Dockerfile`, можно приступить к созданию **образа**
- `-t` флаг, означаюший **tag** и позволяет дать имя образу
- `.` указывается в конце – означает относительный путь к `Dockerfile` из директории, в которой мы сейчас находимся в терминале, в противном случае нужно будет писать весь относительный путь до `Dockerfile`
```shell
$ docker build -t <"имя образа"> .
```
Usage:  docker buildx build [OPTIONS] PATH | URL | -

### Команда `images`
Позволяет просмотреть все текущие образы и их статусы
```shell
$ docker images
```

### Команда `image rm`
Команда для удаления образа
```shell
$ docker image rm <имя или ID образа>
```
либо можно воспользоваться сокращённойй версией:
```shell
$ docker rmi <имя или ID образа>
```
можно удалить несколько сразу, если в конце команды перечислить ID-шники или имена всех образов для удаления через пробел

---

## Команды работы с контейнером
Находясь внутри контейнера, можно пользоваться CLI командами.

### Команда `hostname`
```shell
# hostname
```
Команда позволяет проверить, какое имя было присвоено контейнеру (e.g.: `8b676bfd8028`)

### Команда `hostname -i`
```shell
# hostname -i
```
Команда позволяет проверить присвоенный контейнеру IP address (e.g.: `172.17.0.2`)  
Для каждого контейнера Docker автоматически создаёт IP address в момент запуска контейнера.  

### Команда `ping`
А ещё этот контейнер имеет доступ к интернету, что можно проверить с помющью команды (например IP Google)
```shell
# ping 8.8.8.8
```

### Команда `exit`
После выполнения этой команды произойдёт выход из Linux shell внутри контейнера, а сам контейнер, в котором производилась работа, будет остановлен (`Status` контейнера поменяется с `Running` на `Exited`)

---

## Команда `pull`
Команда предназначена для использования в Terminal CLI и подтягивания выбранной платформы для первого (начального) слоя образа контейнера.
```shell
$ docker pull node
```
Через двоеточие в конце можно указать tag – конкретную версию `Node`, либо оставить как есть. В таком случае Docker установит последнюю версию выбранной платформы.

---

### Команда `ps`
Для того, чтобы посмотреть список всех **запущенных** контейнеров, можно выполнить команду
```shell
$ docker ps
```
Если эту же команду запустить с ключом `-a` (all), в таком случае можно получить список всех контейнеров как активных, так и не активных.

### Команда `run`
Команда **создаёт** контейнер на основании образа
```shell
$ docker run -d --name <здесь задаётся имя запускаемого контейнера> -p 3002:3000 <имя образа на основании которого строится контейнер>
```
- `docker` докер
- `run` запусти
- `-d` в фоновом режиме без блокировки консоли
- `--name <name>` контейнер с именем <имя>
- `-p <port>` на порту <ПОРТ КОНТЕЙНЕРА>:<ПОРТ ПРИЛОЖЕНИЯ>

Дополнительный флаг `--rm` в конце команды нужен для того, чтобы мгновенно удалять контейнер после его остановки.

### Команда `start`
Если контейнер ранее уже конфигурировался, запускася и был остановлен, то чтобы запустить его снова, достаточно будет:
```shell
$ docker start <имя контейнера или его ID>
```

### Команда `stop`
Остановить контейнер так же просто, как и его запустить.
```shell
$ docker stop <имя контейнера или его ID>
```

### Команда `rm`
Контейнеры можно не только создавать, запускать и останавливать, но и удалять.  
Однако: запущенный контейнер удалить нельзя. Сначала необходимо выполнить его `stop`  
Если при удалении контейнера что-то произошло и удаление не сработало, то можно повторить команду с флагом `--force`
```shell
$ docker rm [-f] <имя контейнера или его ID>
```

### Команда `system prune`
Команда является жёстким ресетом для Docker. Она очищает весь кэщ Docker и удаляет все образы и контейнеры
```shell
$ docker system prune -a
```
WARNING! This will remove:
- all stopped containers
- all networks not used by at least one container
- all images without at least one container associated to them
- all build cache
  Are you sure you want to continue? [y/N] 
